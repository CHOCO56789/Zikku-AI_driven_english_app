---
description: 制作アプリの概要（未定な部分も多い）
globs: 
alwaysApply: false
---
英語ニュースを英語で読みたいのに難しすぎて続かない。わからない単語をいちいち調べるのがめんどくさい。Patttoはそんなあなたへ優しい文章でニュースを伝える学習アプリです。

## 1. アプリの目的・背景

- **目的**:
    
    英語ニュースを英語で読みたいのに難しすぎて続かない・わからない単語をいちいち調べるのがめんどくさい人へ、英語でニュースを読み続けられることをサポートする。LLM✨とパーソナライズされたAIが、あなたに合わせた英語で優しい英語のニュースを届ける。
    
- **背景**:
    
    英語学習者の学習方法にはさまざまな方法があるが、その一つとして、英語ニュースを読んで学ぶ方法がある。自分の興味がある分野の最新ニュースを読むことができ楽しく学べる点や、ニュース情報から実用的な英語を学ぶことができるため有効であるとされる。しかし、ニュースには専門用語が多く登場する単語の難易度が高く学習者の習熟度と文章の難易度が大きな差が開きやすく手軽さがない。このアプリではその問題に着目し、AIによる難易度に合わせた英語ニュースを提供する。
    

## 2. 対象範囲

- 英語のリーディング力を高めたい方・英語で情報収集したい人が、今日のニュースをぱっと読むことを助けます。
- この仕様書では、Patttoの機能について網羅的に説明する。

## 3. 開発の方針

- シンプルで明確な使い方をUIで示す。
- ユーザーごとの多様な使い方を提供する。
- 投稿の種類アイデア
    - オリジナルキャラクターの日記を投稿し、日常会話のイディオムを学べる。
    - 引用記事（人手をいれる）
    - AIによる生成記事

## 4. 機能一覧

### MVP

- ホーム（ニュースフィード一覧ページ）
- 簡単、普通、難しい三種類のレベルで記事のレベルを切り替えられる
- 難しい可能性のある単語をはじめに確認できる
- クリックして単語の意味を確認できる（長押しで全ての単語の下に意味が出る）
- 名刺、動詞、修飾語が色分けでわかる
- 和訳が見たければ確認できる
- 記事を読み、難しかった　普通　簡単だった　のボタンを設置
- レッスン形式で文章を読み進めて行く
- 読んだアーティクルが記録されて行く
- 新しく追加されたアーティクルが上に表示される

あとで追加する機能

- ジャンルで分けられたニュース提供
- お気に入りのニュース
- ニュースカード
- チュートリアル機能
    - 難易度の登録
- 復習テスト
- 習っていない単語のハイライト&説明
- 記事検索機能
- 復習の言い回し&単語を利用したニュース
    - 習った言い回しでこれも表現できるんだ！というフィーリングになりたい
- 高難度な単語が出てきたとき、習った単語のベクトルストアとの類似度をLLMに与え、文章の言い換えを行う。
    - 安いエンベディディングモデル検討
    - ベクトルストアのキャッシュを記録

## 4. 要件・条件

- **機能要件**: アプリが満たすべき具体的な機能（例: ユーザー登録、データ保存）。
    
    
- **非機能要件**: 性能（処理速度）、拡張性、セキュリティなど技術的な条件

## 5. 画面仕様

- 各画面のデザインやレイアウト、遷移図を記載。
- 画面間の動作フローやユーザーインターフェース（UI）の詳細も含めます[1](mdc:https:/biz.moneyforward.com/work-efficiency/basic/9680)[3](mdc:https:/imitsu.jp/matome/app-developer/9916291271860790)[6](mdc:https:/note.com/tanabemg/n/na2db89a5cbda)。

## 6. 技術的な詳細

- 使用するプログラミング言語、フレームワーク、ライブラリ。
    
    Next.js Versel
    
- 対応するプラットフォーム（iOS/Androidなど）やネットワーク構成[2](mdc:https:/www.stock-app.info/media/specification-templates)[4](mdc:https:/system-kanji.com/posts/app-development-specifications)。

## 7. データベース設計

- 保存するデータの種類や構造（テーブル定義、ER図など）。

検索後記事データ管理

```sql
CREATE TABLE search_metadata (
session_id UUID PRIMARY KEY,
query_text STR(1024),
result_hashes TEXT[],
domain_trust_scores JSONB,
model_version VARCHAR(50),
created_at TIMESTAMPTZ
);
```

```sql
CREATE TABLE problems (
  problem_id UUID PRIMARY KEY,
  problem_type ENUM('multiple_choice', 'translation', 'speaking', 'listening'),
  skill_id VARCHAR(36),
  difficulty_level TINYINT,
  creation_date TIMESTAMP,
  version INT,
  base_language CHAR(2),
  target_language CHAR(2),
  ai_metadata JSON,
  average_success_rate DECIMAL(5,2),
  average_time DECIMAL(6,2),
  last_used TIMESTAMP
);
```

```sql
CREATE TABLE article (
  article_id UUID PRIMARY KEY,
  status VARCHAR(20) CHECK (status IN ('draft', 'publish', 'private', 'future')),
  base_language CHAR(2) NOT NULL,
  target_language CHAR(2) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  base_text TEXT NOT NULL,
  target_text TEXT NOT NULL,
  difficulty_level SMALLINT CHECK (difficulty_level BETWEEN 1 AND 5),
  last_accessed TIMESTAMP
);

```

- 入出力データの形式や外部システムとの連携方法も明記[4](mdc:https:/system-kanji.com/posts/app-development-specifications)[6](mdc:https:/note.com/tanabemg/n/na2db89a5cbda)。

## 8. エラーハンドリングと通知

- エラー発生時の挙動やユーザーへの通知方法。
- 例: 「ログイン失敗時にエラーメッセージを表示」など[1](mdc:https:/biz.moneyforward.com/work-efficiency/basic/9680)[3](mdc:https:/imitsu.jp/matome/app-developer/9916291271860790)。

## 9. スケジュールとリソース

- 開発スケジュールやマイルストーン。
- 必要なリソース（時間、ツール）や担当者の役割分担[2](mdc:https:/www.stock-app.info/media/specification-templates)[5](mdc:https:/hybrid-technologies.co.jp/blog/knowhow/20230401)。

## 10. 制約条件

- 記事中の情報が他の信頼できる情報源で検証可能であるかどうかを確認します。客観的な事実を伝えるために、他の独立した報道機関でも同様の内容が報じられていることを確認する。
- MVPを1ヶ月で作成する。